(self.webpackChunkpower_reader=self.webpackChunkpower_reader||[]).push([[849],{8926:function(n){function t(n,t,e,r,i,a,o){try{var u=n[a](o),f=u.value}catch(c){return void e(c)}u.done?t(f):Promise.resolve(f).then(r,i)}n.exports=function(n){return function(){var e=this,r=arguments;return new Promise((function(i,a){var o=n.apply(e,r);function u(n){t(o,i,a,u,f,"next",n)}function f(n){t(o,i,a,u,f,"throw",n)}u(void 0)}))}},n.exports.__esModule=!0,n.exports.default=n.exports},5584:function(n,t,e){"use strict";var r=e(7757),i=e(8926);t.J=void 0;t.J=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"==typeof window)return{persistAtom:function(){}};var t=n.key,e=void 0===t?"recoil-persist":t,a=n.storage,o=void 0===a?localStorage:a,u=function(n){var t=n.onSet,e=n.node,a=n.trigger,o=n.setSelf;if("get"===a){var u=c();"function"==typeof u.then&&u.then((function(n){n.hasOwnProperty(e.key)&&o(n[e.key])})),u.hasOwnProperty(e.key)&&o(u[e.key])}t(function(){var n=i(r.mark((function n(t,i,a){var o;return r.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:"function"==typeof(o=c()).then?o.then((function(n){return f(t,n,e.key,a)})):f(t,o,e.key,a);case 2:case"end":return n.stop()}}),n)})));return function(t,e,r){return n.apply(this,arguments)}}())},f=function(n,t,e,r){r?delete t[e]:t[e]=n,l(t)},c=function(){var n=o.getItem(e);return null==n?{}:"string"==typeof n?s(n):"function"==typeof n.then?n.then(s):{}},s=function(n){if(void 0===n)return{};try{return JSON.parse(n)}catch(t){return console.error(t),{}}},l=function(n){try{"function"==typeof o.mergeItem?o.mergeItem(e,JSON.stringify(n)):o.setItem(e,JSON.stringify(n))}catch(t){console.error(t)}};return{persistAtom:u}}},9789:function(n,t,e){"use strict";var r;e.d(t,{Z:function(){return l}});var i=new Uint8Array(16);function a(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var u=function(n){return"string"==typeof n&&o.test(n)},f=[],c=0;c<256;++c)f.push((c+256).toString(16).substr(1));var s=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(f[n[t+0]]+f[n[t+1]]+f[n[t+2]]+f[n[t+3]]+"-"+f[n[t+4]]+f[n[t+5]]+"-"+f[n[t+6]]+f[n[t+7]]+"-"+f[n[t+8]]+f[n[t+9]]+"-"+f[n[t+10]]+f[n[t+11]]+f[n[t+12]]+f[n[t+13]]+f[n[t+14]]+f[n[t+15]]).toLowerCase();if(!u(e))throw TypeError("Stringified UUID is invalid");return e};var l=function(n,t,e){var r=(n=n||{}).random||(n.rng||a)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){e=e||0;for(var i=0;i<16;++i)t[e+i]=r[i];return t}return s(r)}},3970:function(n,t,e){"use strict";e.d(t,{Z:function(){return a}});var r=e(7294),i=e(8878);function a(n){var t=(0,i.y)(Object.assign({},n));return r.createElement("button",Object.assign({},n,{className:t.button+" "+n.className}))}},1796:function(n,t,e){"use strict";e.d(t,{Z:function(){return l}});var r=e(3366),i=e(5861),a=e(2982),o=e(7757),u=e.n(o),f=e(7294),c=e(3441),s=["initialState"];function l(n){void 0===n&&(n={});var t=n.initialState?Object.keys(n.initialState).map((function(t){return{id:t,value:n.initialState[t]}})):[],e=(0,f.useState)(t),o=e[0],l=e[1];function d(){return(d=(0,i.Z)(u().mark((function t(e){var r;return u().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),!n.onSubmit){t.next=6;break}return r=o.reduce((function(n,t){return n[t.id]=t.value,n}),{}),t.next=5,n.onSubmit(r);case 5:l([]);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var m=n,v=(m.initialState,(0,r.Z)(m,s));return f.createElement(c.s.Provider,{value:function(n,t){var e=o.find((function(t){return t.id===n}));e?e.value=t:o.push({id:n,value:t}),l((0,a.Z)(o))}},f.createElement(c.L.Provider,{value:o},f.createElement("form",Object.assign({},v,{onSubmit:function(n){return d.apply(this,arguments)}}))))}},8368:function(n,t,e){"use strict";e.d(t,{V:function(){return r},Z:function(){return u}});var r,i=e(7294),a=e(1819);!function(n){n.H1="h1",n.H2="h2",n.H3="h3",n.H4="h4",n.H5="h5",n.H6="h6",n.P="p"}(r||(r={}));var o=(0,a.QM)({heading:{color:"#ffffff",fontSize:48,margin:[48,0]}});function u(n){var t=o(),e=(null==n?void 0:n.tag)||r.P;return i.createElement(e,Object.assign({},n,{className:t.heading}))}},9019:function(n,t,e){"use strict";e.d(t,{Z:function(){return u}});var r=e(7294),i=e(1819),a=e(3441),o=(0,i.QM)({label:{color:"#ffffff",display:"block",margin:[0,0,8]},input:{background:0,border:{color:"#ffffff33",width:[0,0,2,0]},color:"#ffffff",display:"block",fontSize:16,margin:[0,0,32],padding:4,transition:"border-color 150ms ease-in-out","&:hover":{border:{color:"#ffffff77"}},"&:active, &:focus":{border:{color:"#ffffffaa"},outline:"none"}}});function u(n){var t,e=o(),i=(0,r.useContext)(a.L),u=(0,r.useContext)(a.s);if(!n.name)throw new Error("Name is required for an input");var f=(null===(t=i.find((function(t){return t.id===n.name})))||void 0===t?void 0:t.value)||"";return r.createElement(r.Fragment,null,r.createElement("label",{className:e.label,htmlFor:n.name},n.label,":"),r.createElement("input",Object.assign({},n,{className:e.input+" "+n.className,value:f,onInput:function(t){return u(n.name,t.currentTarget.value)}})))}},3081:function(n,t,e){"use strict";e.d(t,{Z:function(){return f}});var r=e(3366),i=e(7294),a=e(1597),o=e(8878),u=["variant"];function f(n){var t=(0,o.y)(Object.assign({},n)),e=(n.variant,(0,r.Z)(n,u));return i.createElement(a.Link,Object.assign({},e,{className:t.button+" "+n.className}),n.children)}},5256:function(n,t,e){"use strict";e.d(t,{Z:function(){return a}});var r=e(7294),i=(0,e(1819).QM)({main:{minHeight:768,padding:[32,64]}});function a(n){var t=i();return r.createElement("main",Object.assign({},n,{className:t.main}))}},8878:function(n,t,e){"use strict";e.d(t,{$:function(){return r},y:function(){return a}});var r,i=e(1819);!function(n){n.Primary="primary",n.Secondary="secondary",n.Tertiary="tertiary"}(r||(r={}));var a=(0,i.QM)({button:{background:function(n){return n.variant===r.Primary?"linear-gradient(125deg, #3a52ffee, #33346dee)":"#ffffff22"},backdropFilter:"blur(2px)",border:0,borderRadius:4,boxShadow:"3px 3px 5px #00000011",color:function(n){return n.variant===r.Primary?"#ffffff":n.variant===r.Secondary?"#333333":n.variant===r.Tertiary?"#ffffff":void 0},cursor:"pointer",display:"inline-block",fontFamily:"Helvetica, Arial, sans-serif",fontSize:function(n){return n.variant===r.Tertiary?24:16},margin:0,marginRight:function(n){return n.variant===r.Tertiary?16:0},padding:[10,12],textDecoration:"none",transition:"box-shadow 300ms cubic-bezier(0.34, 1.56, 0.64, 1), transform 300ms cubic-bezier(0.34, 1.56, 0.64, 1)","&:hover, &:focus":{boxShadow:"3px 3px 7px #00000010",transform:"scale(1.01)"},"& > svg":{display:"block"}}})},3441:function(n,t,e){"use strict";e.d(t,{L:function(){return i},s:function(){return a}});var r=e(7294),i=(0,r.createContext)([]),a=(0,r.createContext)((function(){}))},8298:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return x}});var r=e(2982),i=e(7294),a=e(1597),o=e(8525),u=e(9789),f=e(1316),c=e(9980),s=e(3815),l=e(3970),d=e(8878),m=e(1796),v=e(8368),p=e(9019),b=e(3081),g=e(5256),y=e(1819),h=e(3441),w=(0,y.QM)({label:{color:"#ffffff",display:"block",margin:[0,0,8]},input:{backdropFilter:"blur(2px)",background:"#ffffff0a",border:{color:"#ffffff33",width:[0,0,2,0]},color:"#ffffff",display:"block",fontSize:16,fontFamily:"Helvetica, Arial, sans-serif",height:580,margin:[0,0,32],maxWidth:640,padding:8,resize:"none",transition:"border-color 150ms ease-in-out",width:"100%","&:hover":{border:{color:"#ffffff77"}},"&:active, &:focus":{border:{color:"#ffffffaa"},outline:"none"}}});function S(n){var t,e=w(),r=(0,i.useContext)(h.L),a=(0,i.useContext)(h.s);if(!n.name)throw new Error("Name is required for an input");var o=(null===(t=r.find((function(t){return t.id===n.name})))||void 0===t?void 0:t.value)||"";return i.createElement(i.Fragment,null,i.createElement("label",{className:e.label,htmlFor:n.name},n.label,":"),i.createElement("textarea",Object.assign({},n,{className:e.input+" "+n.className,value:o,onInput:function(t){return a(n.name,t.currentTarget.value)}})))}function x(){var n=(0,o.FV)(f.K),t=n[0],e=n[1],y=(0,s.Me)(t);return i.createElement(g.Z,null,i.createElement(m.Z,{initialState:y?{name:y.name,content:y.content}:null,onSubmit:function(n){var i={id:(null==y?void 0:y.id)||(0,u.Z)(),name:n.name,content:n.content,readerPosition:0};if(y){var o=(0,r.Z)(t.documents);o[o.indexOf(y)]=i,e(Object.assign({},t,{documents:o}))}else e(Object.assign({},t,{documents:[].concat((0,r.Z)(t.documents),[i])}));(0,a.navigate)(c.Z.Dashboard)}},i.createElement(v.Z,{tag:v.V.H1},y?"Edit document":"New document"),i.createElement(p.Z,{label:"Name",name:"name",required:!0}),i.createElement(S,{label:"Content",name:"content",type:"textarea",required:!0}),i.createElement(l.Z,{variant:d.$.Tertiary},y?"Save":"Create"),i.createElement(b.Z,{to:c.Z.Dashboard,variant:d.$.Tertiary},"Cancel")))}},1316:function(n,t,e){"use strict";e.d(t,{K:function(){return o},r:function(){return u}});var r=e(8525),i=e(9789),a=(0,e(5584).J)().persistAtom,o=(0,r.cn)({key:"user",default:null,effects_UNSTABLE:[a]});function u(n){var t=n.firstName;return{id:(0,i.Z)(),firstName:t,documents:[]}}},3815:function(n,t,e){"use strict";e.d(t,{DY:function(){return o},JQ:function(){return u},ML:function(){return i},Me:function(){return f}});var r=e(2982),i=60;function a(n,t){for(var e=t;e>=0;e--){var i=0===e;if(!n[e])return[n.trim()];if(i)return[n.substring(0,t).trim()].concat((0,r.Z)(a(n.substring(t),t)));if(" "===n[e])return[n.substring(0,e).trim()].concat((0,r.Z)(a(n.substring(e),t)))}return[]}function o(n,t){return void 0===t&&(t=60),a(n,t)}function u(n,t){for(var e=0,r=0;r<n.length;r++){if((e+=n[r].length+1)>=t){var i=e-(n[r].length+1),a=e-i,o=t-i;return{activeLines:[n[r-1]||" ",n[r],n[r+1]||" "],lineProgress:o/a*100}}}throw new Error("Couldn't find reading position in document")}function f(n){if("undefined"!=typeof window){var t=window.location.search,e=new URLSearchParams(t);return n.documents.find((function(n){return n.id===e.get("id")}))}return null}},9980:function(n,t,e){"use strict";var r;e.d(t,{Z:function(){return r}}),function(n){n.About="/about",n.CreateDocument="/document",n.Dashboard="/",n.EditDocument="/document?id={id}",n.Introduction="/introduction",n.Reader="/reader?id={id}",n.Setup="/setup"}(r||(r={}))}}]);
//# sourceMappingURL=component---src-pages-document-tsx-905171b53c816f573c69.js.map